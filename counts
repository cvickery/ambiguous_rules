#! /usr/local/bin/bash

# Count different lines that match match a pattern

IFS=$'\n'
key=$1
if [[ $key == '' ]]
then
  key=BKCR
fi

for line in `ack $key rules_report.txt|sort|uniq`
do
  count=(`ack "$line" rules_report.txt|wc -l`)
  printf "%'d cases:\t%s\n" $count $line
  if [[ $SUMMARY ]]
  then
    echo -e "----------------------------------------------------------------------"
    examples=`ack -B 4 -A 2 $line rules_report.txt`
    echo -e "$examples\n"
  fi
done